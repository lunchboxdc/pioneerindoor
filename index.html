<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Pioneer Indoor</title>

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.3/handlebars.min.js"></script>
  <link type="text/css" rel="stylesheet" href="css/master.css"/>

  <script id="facebookTemplate" type="text/x-handlebars-template">
    {{#each .}}
      <div class="content-block">
        <div>
            <span>{{from.name}}</span>
        </div>    
        <p>{{message}}</p>
        <a href="{{link}}"><img src="{{picture}}"/></a>
        <p>{{name}}</p>
        <p>{{description}}</p>
        <p>{{caption}}</p>
      </div>
    {{/each}}
  </script>  

</head>

<body>
  <script>
    getFbPicture();
    getFbPosts();

    var facebookTemplate = Handlebars.compile($('#facebookTemplate').html());
    var facebookFeedHtml;

    function getFbPicture() {
      $.ajax({
        url: 'https://graph.facebook.com/v2.3/PioneerIndoor/picture',
        dataType: 'json',
        data: {redirect: false},
        beforeSend: function(xhr) {
          xhr.setRequestHeader("Authorization", "OAuth 763105940474072|UnGwKT6yz37pyGdSHGCpHx6opQI");
        },
        error: function() {
          // error handler
        },
        success: function(json) {
          console.log(json);
        }
      });
    }

    function getFbPosts() {
      $.ajax({
        url: 'https://graph.facebook.com/v2.3/PioneerIndoor/posts',
        dataType: 'json',
        data: {limit: 20, fields: 'from,message,name,description,caption,picture,link,type'},
        beforeSend: function(xhr) {
          xhr.setRequestHeader("Authorization", "OAuth 763105940474072|UnGwKT6yz37pyGdSHGCpHx6opQI");
        },
        error: function() {
          // error handler
        },
        success: function(json) {
          facebookFeedHtml = facebookTemplate(json.data);
          $('.right-rail').html(facebookFeedHtml);
        }
      });
    }

    $(function() {
      $('.right-rail').html(facebookFeedHtml);
    });
  </script>
  <div class="site-container">
    <header>
      <div class="nav-bar">
        <a class="logo" href="/">
          <img src="image/logo.svg" onerror="this.src='image/logo.png'">
        </a>
        <nav class="site-nav">
        	<ul>
        		<li>AUDITION</li>
        		<li>SCHEDULE</li>
        		<li>STAFF</li>
            <li>MEDIA</li>
            <li>ABOUT</li>
            <li>CONTACT</li>
        	</ul>
        </nav>
      </div>
    </header>

    <div class="slider">
      <img src="image/slider1.jpg"/>
    </div>

    <section class="main-content">
      <div class="content-block">
        <div>
            <span>Andy Hull</span>
            <span>15 May 2005</span>
        </div>    
        <h1>Why drumming is an amazing hobby.</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat....</p>
        <p>Boats Boats Boats!</p>
      </div>
    </section>

    <section class="right-rail">
      
    </section>

  </div>

</body>

</html>
