{{#section 'head'}}
	<link type="text/css" rel="stylesheet" href="/assets/css/admin-master.css"/>
	<script>
		var auditioneeTemplate;
		$.get("/assets/template/auditioneeTemplate.html", function(data) {
			auditioneeTemplate = Handlebars.compile(data);
		});

		function deleteAuditionee(firstName, lastName, id) {
			if(confirm('Are you sure you want to delete auditionee, '+firstName+' '+lastName+'?')) {
				var form = $("<form></form>")
					.attr({method: 'post', action: '/admin/auditionees/delete', style: "display:none;"})
					.append($('<input>').attr({type: 'hidden', name: 'auditioneeId', value: id}));
				$('body').append(form);
				form.submit();
			}
		}

		function showModal(id) {
			var auditionee = auditionees.filter(function(obj) {
				return obj._id == id;
			});
			$('#auditioneeModal .modal-content').html(auditioneeTemplate(auditionee[0]));
			$('#auditioneeModal').bPopup();
		}
	</script>

{{/section}}

{{> leftRail}}

<div class="content">
	<h1>Auditionees</h1>

	{{#if auditioneesMessage}}
		<div>{{auditioneesMessage}}</div>
	{{/if}}

	<table class="admin-table">
		<thead>
			<tr>
				<th>First Name</th>
				<th>Last Name</th>
				<th>Address 1</th>
				<th>Address 2</th>
				<th>City</th>
				<th>State</th>
				<th>Zip</th>
				<th>Phone</th>
				<th>Email</th>
			</tr>
		</thead>
		<tbody>
			{{#each auditionees}}
				<tr onclick="showModal('{{_id}}')">
					<td>{{firstName}}</td>
					<td>{{lastName}}</td>
					<td>{{address1}}</td>
					<td>{{address2}}</td>
					<td>{{city}}</td>
					<td>{{state}}</td>
					<td>{{zip}}</td>
					<td>{{phone}}</td>
					<td>{{email}}</td>
					<td><button onclick="deleteAuditionee('{{firstName}}', '{{lastName}}', '{{_id}}')">Delete</button></td>
				</tr>
			{{/each}}
		</tbody>
	</table>
	<div id="auditioneeModal" class="modal">
		<span class="b-close"><i class="fa fa-times-circle"></i></span>

		<div class="modal-content"></div>
	</div>
	<script>var auditionees = {{{auditioneesString}}};</script>
</div>